   1 0000               # File: $Id$
   2 0000               # Author: Ryan Cervantes (rxc3202@rit.edu)
   3 0000               # Description: this file is the main file for the
   4 0000               #               cs250 project
   5 0000               
   6 0000               
   7 0000               
   8 0000               ###########################################
   9 0000               # ======================================= #
  10 0000               # ||        CONSTANTS BLOCK            || #
  11 0000               # ======================================= #
  12 0000               ###########################################
  13 0000               
  14 0000               # ===========================
  15 0000               # || param block constants ||
  16 0000               # ===========================
  17 0000               
  18 0000               DIM_OFFSET = 0
  19 0000               GEN_OFFSET = 4
  20 0000               A_OFFSET = 8
  21 0000               B_OFFSET = 12
  22 0000               NEXT_A_OFFSET = 16
  23 0000               NEXT_B_OFFSET = 20
  24 0000               A_ARRAY_OFFSET = 24
  25 0000               B_ARRAY_OFFSET = 28
  26 0000               
  27 0000               # syscall codes
  28 0000               
  29 0000               PRINT_INT =	1
  30 0000               PRINT_STRING = 	4
  31 0000               READ_INT = 	5
  32 0000               READ_STRING =	8
  33 0000               
  34 0000               # various frame sizes used by different routines
  35 0000               
  36 0000               FRAMESIZE_8 = 	8
  37 0000               FRAMESIZE_24 =	24
  38 0000               FRAMESIZE_40 =	40
  39 0000               FRAMESIZE_48 =	48
  40 0000               
  41 0000                       .data
  42 0000                       .align      2
  43 0000               
  44 0000               # ====================
  45 0000               #    INPUT STRINGS 
  46 0000               # ====================
  47 0000               
  48 0000               enter_board_size:
  49 0000 0A456E74	        .asciiz "\nEnter board size: "
          65722062
          6F617264
          2073697A
          653A2000
  50 0014               
  51 0014               enter_generations: 
  52 0014 0A456E74	        .asciiz "\nEnter number of generations to run: "
          6572206E
          756D6265
          72206F66
          2067656E
          65726174
  53 003a               
  54 003a               live_cells_A:
  55 003a 0A456E74	        .asciiz "\nEnter number of live cells for colony A: "
          6572206E
          756D6265
          72206F66
          206C6976
          65206365
  56 0065               
  57 0065               live_cells_B:
  58 0065 0A456E74	        .asciiz "\nEnter number of live cells for colony B: "
          6572206E
          756D6265
          72206F66
          206C6976
          65206365
  59 0090               
  60 0090               enter_locations:
  61 0090 0A537461	        .asciiz "\nStart entering locations: \n"
          72742065
          6E746572
          696E6720
          6C6F6361
          74696F6E
  62 00ad               
  63 00ad               # ====================
  64 00ad               #    OTHER STRINGS 
  65 00ad               # ====================
  66 00ad               
  67 00ad               banner:
  68 00ad 0A2A2A2A	        .ascii "\n**********************\n"
          2A2A2A2A
          2A2A2A2A
          2A2A2A2A
          2A2A2A2A
          2A2A2A0A
  69 00c5 2A2A2A2A	        .ascii "****    Colony    ****\n"
          20202020
          436F6C6F
          6E792020
          20202A2A
          2A2A0A  
  70 00dc 2A2A2A2A	        .asciiz "**********************\n"
          2A2A2A2A
          2A2A2A2A
          2A2A2A2A
          2A2A2A2A
          2A2A0A00
  71 00f4               
  72 00f4               gen_banner_start:
  73 00f4 3D3D3D3D	        .asciiz "====    GENERATION "
          20202020
          47454E45
          52415449
          4F4E2000
  74 0108               
  75 0108               gen_banner_end:
  76 0108 20202020	        .asciiz "    ====\n"
          3D3D3D3D
          0A00    
  77 0112               
  78 0112               newline: 
  79 0112 0A00    	        .asciiz "\n"
  80 0114               
  81 0114               space:
  82 0114 2000    	        .asciiz " "
  83 0116               
  84 0116               # ====================
  85 0116               #    ERROR STRINGS 
  86 0116               # ====================
  87 0116               
  88 0116               illegal_size:
  89 0116 0A574152	        .asciiz "\nWARNING: illegal board size, try again: "
          4E494E47
          3A20696C
          6C656761
          6C20626F
          61726420
  90 0140               
  91 0140               illegal_gens:
  92 0140 0A574152	        .asciiz "\nWARNING: illegal number of generations, try again: "
          4E494E47
          3A20696C
          6C656761
          6C206E75
          6D626572
  93 0175               
  94 0175               illegal_cells:
  95 0175 0A574152	        .asciiz "\nWARNING: illegal number of live cells, try again: "
          4E494E47
          3A20696C
          6C656761
          6C206E75
          6D626572
  96 01a9               
  97 01a9               illegal_point:
  98 01a9 0A574152	        .asciiz "\nWARNING: illegal point location: "
          4E494E47
          3A20696C
          6C656761
          6C20706F
          696E7420
  99 01cc               
 100 01cc               # ====================
 101 01cc               #    DEBUG STRINGS  
 102 01cc               # ====================
 103 01cc               
 104 01cc               d_dim:
 105 01cc 0A20426F	        .asciiz "\n Board Dimensions: "
          61726420
          44696D65
          6E73696F
          6E733A20
          00      
 106 01e1               
 107 01e1               d_gen:
 108 01e1 0A204765	        .asciiz "\n Generations: "
          6E657261
          74696F6E
          733A2000
 109 01f1               
 110 01f1               d_a_cells:
 111 01f1 0A20436F	        .asciiz "\n Colony A Cells: "
          6C6F6E79
          20412043
          656C6C73
          3A2000  
 112 0204               
 113 0204               d_b_cells:
 114 0204 0A20436F	        .asciiz "\n Colony B Cells: "
          6C6F6E79
          20422043
          656C6C73
          3A2000  
 115 0217               
 116 0217               d_a_loc:
 117 0217 0A204120	        .asciiz "\n A Coordinates: "
          436F6F72
          64696E61
          7465733A
          2000    
 118 0229               
 119 0229               d_b_loc:
 120 0229 0A204220	        .asciiz "\n B Coordinates: "
          436F6F72
          64696E61
          7465733A
          2000    
 121 023b               
 122 023b               lp:
 123 023b 2800    	        .asciiz "("
 124 023d               comma:
 125 023d 2C2000  	        .asciiz ", "
 126 0240               rp:
 127 0240 2900    	        .asciiz ")"
 128 0242               
 129 0242               # ====================
 130 0242               #    BOARD STRINGS  
 131 0242               # ====================
 132 0242               
 133 0242               plus:
 134 0242 2B00    	        .asciiz "+"
 135 0244               
 136 0244               hyphen:
 137 0244 2D00    	        .asciiz "-"
 138 0246               
 139 0246               bar:
 140 0246 7C00    	        .asciiz "|"
 141 0248               
 142 0248               A:
 143 0248 4100    	        .asciiz "A"
 144 024a               B:
 145 024a 4200    	        .asciiz "B"
 146 024c               
 147 024c               # ====================
 148 024c               #     GAME BUFFERS
 149 024c               # ====================
 150 024c               # These addresses will hold the values read in by the user
 151 024c               # if a negative one is detected in a register, the value will
 152 024c               # be known to not be read in correctly
 153 024c               
 154 024c               board_dim:
 155 024c FFFFFFFF	        .word       -1
 156 0250               
 157 0250               generations:
 158 0250 FFFFFFFF	        .word       -1
 159 0254               
 160 0254               A_cells:
 161 0254 FFFFFFFF	        .word       -1
 162 0258               
 163 0258               B_cells:
 164 0258 FFFFFFFF	        .word       -1
 165 025c               
 166 025c               a_next:
 167 025c 00000260	        .word       a_coordinates
 168 0260               
 169 0260               a_coordinates:                                          
 170 0260 00000000	        .space      7200                            #space for 300 x's
          00000000
          00000000
          00000000
          00000000
          00000000
 171 1e80                       .align      2
 172 1e80               
 173 1e80               b_next:
 174 1e80 00001E84	        .word       b_coordinates
 175 1e84               
 176 1e84               b_coordinates:
 177 1e84 00000000	        .space      7200                            #space for 300 y's
          00000000
          00000000
          00000000
          00000000
          00000000
 178 3aa4                       .align      2
 179 3aa4               
 180 3aa4               param_block:
 181 3aa4                       #   === 32 byte structure ===   #
 182 3aa4 0000024C	        .word       board_dim                       #0 offset
 183 3aa8 00000250	        .word       generations                     #4 offset
 184 3aac 00000254	        .word       A_cells                         #8 offset
 185 3ab0 00000258	        .word       B_cells                         #12 offset
 186 3ab4 0000025C	        .word       a_next                          #16 offset
 187 3ab8 00001E80	        .word       b_next                          #20 offset
 188 3abc 00000260	        .word       a_coordinates                   #24 offset
 189 3ac0 00001E84	        .word       b_coordinates                   #28
 190 3ac4               
 191 3ac4               
 192 3ac4               ###########################################
 193 3ac4               # ======================================= #
 194 3ac4               # ||        MAIN CODE BLOCK            || #
 195 3ac4               # ======================================= #
 196 3ac4               ###########################################
 197 0000                       .text
 198 0000                       .align      2
 199 0000                       .globl      main
 200 0000                       .globl      get_integer
 201 0000                       .globl      get_A_cells
 202 0000                       .globl      get_B_cells
 203 0000               
 204 0000               main:       
 205 0000 23BDFFD0	        addi    $sp, $sp, -FRAMESIZE_48
 206 0004 AFBF002C	        sw      $ra, -4+FRAMESIZE_48($sp)
 207 0008                       
 208 0008 34020004	        li      $v0, PRINT_STRING                   #print banner
 209 000c 3C040000	        la      $a0, banner
     0010 34840000
 210 0014 0000000C	        syscall
 211 0018                       
 212 0018                       # ---------------------------- #
 213 0018                       #       Get user input         #
 214 0018                       # ---------------------------- #
 215 0018               
 216 0018                       # print and get board dimensions #
 217 0018               
 218 0018 34020004	        li      $v0, PRINT_STRING                    
 219 001c 3C040000	        la      $a0, enter_board_size
     0020 34840000
 220 0024 0000000C	        syscall
 221 0028                       
 222 0028 3C040000	        la      $a0, board_dim 
     002c 34840000
 223 0030 34050004	        li      $a1, 4
 224 0034 3406001E	        li      $a2, 30
 225 0038 3C070000	        la      $a3, illegal_size
     003c 34E70000
 226 0040 0C000000	        jal     get_integer
 227 0044                       
 228 0044                       # print and get generations #
 229 0044               
 230 0044 34020004	        li      $v0, PRINT_STRING                    
 231 0048 3C040000	        la      $a0, enter_generations
     004c 34840000
 232 0050 0000000C	        syscall
 233 0054                       
 234 0054 3C040000	        la      $a0, generations
     0058 34840000
 235 005c 34050000	        li      $a1, 0
 236 0060 34060014	        li      $a2, 20
 237 0064 3C070000	        la      $a3, illegal_gens
     0068 34E70000
 238 006c 0C000000	        jal     get_integer
 239 0070               
 240 0070                       # print and get A colony size #
 241 0070               
 242 0070 34020004	        li      $v0, PRINT_STRING                    
 243 0074 3C040000	        la      $a0, live_cells_A
     0078 34840000
 244 007c 0000000C	        syscall
 245 0080                       
 246 0080 3C040000	        la      $a0, A_cells
     0084 34840000
 247 0088 34050000	        li      $a1, 0
 248 008c 3C060000	        la      $a2, board_dim
     0090 34C60000
 249 0094 8CC60000	        lw      $a2, 0($a2)
 250 0098 00C60018	        mul     $a2, $a2, $a2                       #dim^2
     009c 00003012
 251 00a0 3C070000	        la      $a3, illegal_cells
     00a4 34E70000
 252 00a8 0C000000	        jal     get_integer
 253 00ac               
 254 00ac                       # print and get A colony locations #
 255 00ac               
 256 00ac 34020004	        li      $v0, PRINT_STRING                    
 257 00b0 3C040000	        la      $a0, enter_locations
     00b4 34840000
 258 00b8 0000000C	        syscall
 259 00bc                       
 260 00bc 3C040000	        la      $a0, param_block
     00c0 34840000
 261 00c4 0C000000	        jal     get_A_cells
 262 00c8               
 263 00c8                       # print and get B colony size #
 264 00c8               
 265 00c8 34020004	        li      $v0, PRINT_STRING                    
 266 00cc 3C040000	        la      $a0, live_cells_B
     00d0 34840000
 267 00d4 0000000C	        syscall
 268 00d8                       
 269 00d8 3C040000	        la      $a0, B_cells
     00dc 34840000
 270 00e0 34050000	        li      $a1, 0
 271 00e4 3C060000	        la      $a2, board_dim
     00e8 34C60000
 272 00ec 8CC60000	        lw      $a2, 0($a2)
 273 00f0 00C60018	        mul     $a2, $a2, $a2                       #dim^2
     00f4 00003012
 274 00f8 3C070000	        la      $a3, illegal_cells
     00fc 34E70000
 275 0100 0C000000	        jal     get_integer
 276 0104                       
 277 0104                       # print and get B colony locations #
 278 0104               
 279 0104 34020004	        li      $v0, PRINT_STRING                    
 280 0108 3C040000	        la      $a0, enter_locations
     010c 34840000
 281 0110 0000000C	        syscall
 282 0114                       
 283 0114 3C040000	        la      $a0, param_block
     0118 34840000
 284 011c 0C000000	        jal     get_B_cells
 285 0120                       
 286 0120               
 287 0120                       # == test input grabbing == #
 288 0120 3C040000	        la      $a0, param_block
     0124 34840000
 289 0128 0C00006F	        jal     debug_params
 290 012c               
 291 012c               end_main:
 292 012c 8FBF002C	        lw          $ra, -4+FRAMESIZE_48($sp)
 293 0130 23BD0030	        addi        $sp, $sp, FRAMESIZE_48
 294 0134 03E00008	        jr          $ra
 295 0138               
 296 0138               
 297 0138               
 298 0138               ###########################################
 299 0138               # ======================================= #
 300 0138               # ||        Helper Code                || #
 301 0138               # ======================================= #
 302 0138               ###########################################
 303 0138               
 304 0138               # =========================================================
 305 0138               # Name:             print_locations
 306 0138               # =========================================================
 307 0138               # Description:      prints an array of location "structs"
 308 0138               #                   each structure is 8 bytes long where:
 309 0138               #                       - 0 -> x coordinate
 310 0138               #                       - 4 offset -> y coordinate
 311 0138               #
 312 0138               # Parameters:
 313 0138               #       a0 -        the location of array to print
 314 0138               #       a1 -        the size of the array
 315 0138               #
 316 0138               # T Registers:
 317 0138               #       t0 -        loop counter
 318 0138               #     
 319 0138               # =========================================================
 320 0138               print_locations:
 321 0138 34080000	        li      $t0, 0                              # i == 0
 322 013c 00804821	        move    $t1, $a0                            # pointer
 323 0140               
 324 0140               print_loop:
 325 0140 11050019	        beq     $t0, $a1, print_done                #done if i == n 
 326 0144               
 327 0144 3C040000	        la      $a0, newline
     0148 34840000
 328 014c 34020004	        li      $v0, PRINT_STRING                   #print \n
 329 0150 0000000C	        syscall
 330 0154                       
 331 0154 3C040000	        la      $a0, lp
     0158 34840000
 332 015c 34020004	        li      $v0, PRINT_STRING                   #print (
 333 0160 0000000C	        syscall
 334 0164                       
 335 0164 8D240000	        lw      $a0, 0($t1)                         #get a[i].x
 336 0168 34020001	        li      $v0, PRINT_INT
 337 016c 0000000C	        syscall                                     #print a[i].x
 338 0170               
 339 0170 3C040000	        la      $a0, comma
     0174 34840000
 340 0178 34020004	        li      $v0, PRINT_STRING                   #print ,
 341 017c 0000000C	        syscall
 342 0180                       
 343 0180 8D240004	        lw      $a0, 4($t1)                         #get a[i].y
 344 0184 34020001	        li      $v0, PRINT_INT
 345 0188 0000000C	        syscall                                     #print a[i].y
 346 018c                       
 347 018c 3C040000	        la      $a0, rp
     0190 34840000
 348 0194 34020004	        li      $v0, PRINT_STRING                   #print )
 349 0198 0000000C	        syscall
 350 019c                       
 351 019c 21290008	        addi    $t1, $t1, 8                         #update pointer
 352 01a0 21080001	        addi    $t0, $t0, 1                         #i++
 353 01a4 08000050	        j       print_loop
 354 01a8               
 355 01a8               print_done:
 356 01a8 3C040000	        la      $a0, newline
     01ac 34840000
 357 01b0 34020004	        li      $v0, PRINT_STRING
 358 01b4 0000000C	        syscall
 359 01b8                       
 360 01b8 03E00008	        jr      $ra
 361 01bc               
 362 01bc               # =========================================================
 363 01bc               # Name:             debug_params
 364 01bc               # =========================================================
 365 01bc               # Description:      print the inputs in the param block
 366 01bc               #
 367 01bc               # Parameters:
 368 01bc               #       a0 -        the parameter block
 369 01bc               # S Registers:
 370 01bc               #       s0 -        the saved parameter block
 371 01bc               # =========================================================
 372 01bc               debug_params:
 373 01bc                       
 374 01bc 23BDFFF8	        addi    $sp, $sp, -8
 375 01c0 AFBF0004	        sw      $ra, 4($sp)
 376 01c4 AFB00000	        sw      $s0, 0($sp)
 377 01c8                       
 378 01c8 00808021	        move    $s0, $a0                            #save param block
 379 01cc               
 380 01cc                       # print board dimensions #
 381 01cc               
 382 01cc 34020004	        li      $v0, PRINT_STRING
 383 01d0 3C040000	        la      $a0, d_dim
     01d4 34840000
 384 01d8 0000000C	        syscall
 385 01dc 34020001	        li      $v0, PRINT_INT
 386 01e0 8E040000	        lw      $a0, DIM_OFFSET($s0)
 387 01e4 8C840000	        lw      $a0, 0($a0)
 388 01e8 0000000C	        syscall
 389 01ec               
 390 01ec                       # print generations #
 391 01ec               
 392 01ec 34020004	        li      $v0, PRINT_STRING
 393 01f0 3C040000	        la      $a0, d_gen
     01f4 34840000
 394 01f8 0000000C	        syscall
 395 01fc 34020001	        li      $v0, PRINT_INT
 396 0200 8E040004	        lw      $a0, GEN_OFFSET($s0)
 397 0204 8C840000	        lw      $a0, 0($a0)                         #load val at 0(label)
 398 0208 0000000C	        syscall
 399 020c               
 400 020c                       # print colony A size #
 401 020c               
 402 020c 34020004	        li      $v0, PRINT_STRING
 403 0210 3C040000	        la      $a0, d_a_cells
     0214 34840000
 404 0218 0000000C	        syscall
 405 021c 34020001	        li      $v0, PRINT_INT
 406 0220 8E040008	        lw      $a0, A_OFFSET($s0)
 407 0224 8C840000	        lw      $a0, 0($a0)                         #load val at 0(label)
 408 0228 0000000C	        syscall
 409 022c               
 410 022c                       # print locations #
 411 022c 34020004	        li      $v0, PRINT_STRING
 412 0230 3C040000	        la      $a0, d_a_loc
     0234 34840000
 413 0238 0000000C	        syscall
 414 023c               
 415 023c                       #lw      $a0, A_ARRAY_OFFSET($s0)            #load addr of arr
 416 023c                       #lw      $a0, 0($a0)
 417 023c 3C040000	        la      $a0, a_coordinates
     0240 34840000
 418 0244                       #lw      $a0, 0($a0)
 419 0244 8E050008	        lw      $a1, A_OFFSET($s0)
 420 0248 8CA50000	        lw      $a1, 0($a1)
 421 024c 0C00004E	        jal     print_locations
 422 0250               
 423 0250               
 424 0250                       # print colony B size#
 425 0250               
 426 0250 34020004	        li      $v0, PRINT_STRING
 427 0254 3C040000	        la      $a0, d_b_cells
     0258 34840000
 428 025c 0000000C	        syscall
 429 0260               
 430 0260 34020001	        li      $v0, PRINT_INT
 431 0264 8E04000C	        lw      $a0, B_OFFSET($s0)
 432 0268 8C840000	        lw      $a0, 0($a0)                         #load val at 0(label)
 433 026c 0000000C	        syscall
 434 0270               
 435 0270                       # print locations#
 436 0270 34020004	        li      $v0, PRINT_STRING
 437 0274 3C040000	        la      $a0, d_b_loc
     0278 34840000
 438 027c 0000000C	        syscall
 439 0280               
 440 0280 3C040000	        la      $a0, b_coordinates                  #get addr of arr
     0284 34840000
 441 0288 8E05000C	        lw      $a1, B_OFFSET($s0)                  #get addr of size
 442 028c 8CA50000	        lw      $a1, 0($a1)                         #get size
 443 0290 0C00004E	        jal     print_locations
 444 0294               
 445 0294 34020004	        li      $v0, PRINT_STRING
 446 0298 3C040000	        la      $a0, newline
     029c 34840000
 447 02a0 0000000C	        syscall
 448 02a4                       
 449 02a4 8FBF0004	        lw      $ra, 4($sp)
 450 02a8 8FB00000	        lw      $s0, 0($sp)
 451 02ac 23BD0008	        addi    $sp, $sp, 8
 452 02b0               
 453 02b0 03E00008	        jr      $ra
 454 02b4               


A                    00000248 R  data 
A_ARRAY_OFFSET     = 00000018   
A_OFFSET           = 00000008   
A_cells              00000254 R  data 
B                    0000024A R  data 
B_ARRAY_OFFSET     = 0000001C   
B_OFFSET           = 0000000C   
B_cells              00000258 R  data 
DIM_OFFSET         = 00000000   
FRAMESIZE_24       = 00000018   
FRAMESIZE_40       = 00000028   
FRAMESIZE_48       = 00000030   
FRAMESIZE_8        = 00000008   
GEN_OFFSET         = 00000004   
NEXT_A_OFFSET      = 00000010   
NEXT_B_OFFSET      = 00000014   
PRINT_INT          = 00000001   
PRINT_STRING       = 00000004   
READ_INT           = 00000005   
READ_STRING        = 00000008   
a_coordinates        00000260 R  data 
a_next               0000025C R  data 
b_coordinates        00001E84 R  data 
b_next               00001E80 R  data 
banner               000000AD R  data 
bar                  00000246 R  data 
board_dim            0000024C R  data 
comma                0000023D R  data 
d_a_cells            000001F1 R  data 
d_a_loc              00000217 R  data 
d_b_cells            00000204 R  data 
d_b_loc              00000229 R  data 
d_dim                000001CC R  data 
d_gen                000001E1 R  data 
debug_params         000001BC R  text 
end_main             0000012C R  text 
enter_board_size     00000000 R  data 
enter_generations    00000014 R  data 
enter_locations      00000090 R  data 
gen_banner_end       00000108 R  data 
gen_banner_start     000000F4 R  data 
generations          00000250 R  data 
get_A_cells          ******** XG
get_B_cells          ******** XG
get_integer          ******** XG
hyphen               00000244 R  data 
illegal_cells        00000175 R  data 
illegal_gens         00000140 R  data 
illegal_point        000001A9 R  data 
illegal_size         00000116 R  data 
live_cells_A         0000003A R  data 
live_cells_B         00000065 R  data 
lp                   0000023B R  data 
main                 00000000 RG text 
newline              00000112 R  data 
param_block          00003AA4 R  data 
plus                 00000242 R  data 
print_done           000001A8 R  text 
print_locations      00000138 R  text 
print_loop           00000140 R  text 
rp                   00000240 R  data 
space                00000114 R  data 
