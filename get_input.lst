   1 0000               #----------------------------------------------------------
   2 0000               # File: $Id$
   3 0000               # Author: Ryan Cervantes (rxc3202@rit.edu)
   4 0000               # Description:
   5 0000               #               This file contains the subroutines that gets the input from the
   6 0000               #               user in order to run the program
   7 0000               #----------------------------------------------------------
   8 0000               
   9 0000               # ===================
  10 0000               # || syscall codes ||
  11 0000               # ===================
  12 0000               
  13 0000               PRINT_INT =	1
  14 0000               PRINT_STRING = 	4
  15 0000               READ_INT = 	5
  16 0000               READ_STRING =	8
  17 0000               
  18 0000               # ===================
  19 0000               
  20 0000               # ==========================
  21 0000               # || param block constants||
  22 0000               # ==========================
  23 0000               
  24 0000               CELL_FRAMESIZE = 24
  25 0000               BOARD_DIM = 0
  26 0000               GENS = 4
  27 0000               A_CELLS = 8
  28 0000               B_CELLS = 12
  29 0000               NEXT_A = 16
  30 0000               NEXT_B  = 20
  31 0000               A_ARR = 24
  32 0000               B_ARR = 28
  33 0000               
  34 0000                       .text
  35 0000                       .align      2
  36 0000                       .globl      get_integer
  37 0000                       .globl      get_A_cells
  38 0000                       .globl      get_B_cells
  39 0000               
  40 0000               # ===================================================================
  41 0000               # Name:             get_integer
  42 0000               # ===================================================================
  43 0000               # Description:      This function loads the user input for
  44 0000               #                   the single integer parameters
  45 0000               # Parameters:                         
  46 0000               #       a0 -        the location where the input will be stored
  47 0000               # ===================================================================
  48 0000               get_integer:
  49 0000 23BDFFF8	        addi    $sp, $sp, -8                       
  50 0004 AFBF0004	        sw      $ra, 4($sp)
  51 0008 AFB00000	        sw      $s0, 0($sp)                         #store s register
  52 000c               
  53 000c 00808021	        move    $s0, $a0                            
  54 0010 34020005	        li      $v0, READ_INT                       #read int
  55 0014 0000000C	        syscall        
  56 0018 AE020000	        sw      $v0, 0($s0)                         #store in variable
  57 001c               
  58 001c 8FBF0004	        lw      $ra, 4($sp)
  59 0020 8FB00000	        lw      $s0, 0($sp)                         #restore s register 
  60 0024 23BD0008	        addi    $sp, $sp, 8
  61 0028 03E00008	        jr      $ra
  62 002c               
  63 002c               # ===================================================================
  64 002c               # Name:             get_A_cells:
  65 002c               # ===================================================================
  66 002c               # Description:      This function loads the user input for the
  67 002c               #                   locations of the live cells for colony A
  68 002c               #                   
  69 002c               # Parameters:                         
  70 002c               #       a0 -        the parameter block
  71 002c               # S Registers:
  72 002c               #       s0 -        the loop max (2xcells to place)
  73 002c               #       s1 -        the loop counter
  74 002c               #       s2 -        the location of the x buffer
  75 002c               #       s3 -        the location of the y buffer
  76 002c               #
  77 002c               # T Registers:
  78 002c               #       t0 -        end loop register
  79 002c               #       t1 -        temp for row coordinate
  80 002c               #       t2 -        temp for col coordinate
  81 002c               #
  82 002c               # ===================================================================
  83 002c               
  84 002c               get_A_cells:
  85 002c 23BDFFE8	        addi    $sp, $sp, -CELL_FRAMESIZE
  86 0030 AFBF0014	        sw      $ra, -4+CELL_FRAMESIZE($sp)
  87 0034 AFB00010	        sw      $s0, -8+CELL_FRAMESIZE($sp)       
  88 0038 AFB1000C	        sw      $s1, -12+CELL_FRAMESIZE($sp)                       
  89 003c AFB20008	        sw      $s2, -16+CELL_FRAMESIZE($sp)                       
  90 0040 AFB30004	        sw      $s3, -20+CELL_FRAMESIZE($sp)
  91 0044                       
  92 0044 8C900008	        lw      $s0, A_CELLS($a0)                   #load addr of cell cnt
  93 0048 8E100000	        lw      $s0, 0($s0)                         #load int inside addr 
  94 004c                   
  95 004c 8C920010	        lw      $s2, NEXT_A($a0)                    #load addr of loc buf
  96 0050 8E520000	        lw      $s2, 0($s2)                         #load addr of next el.
  97 0054                       
  98 0054 00008821	        move    $s1, $zero                          #i = 0
  99 0058                       
 100 0058               loc_loop_A:
 101 0058 0230402A	        slt     $t0, $s1, $s0                       #if(i < max)
 102 005c 1100000B	        beq     $t0, $zero, A_cells_end             #goto end
 103 0060                       
 104 0060                       # get row coordinate # 
 105 0060               
 106 0060 34020005	        li      $v0, READ_INT
 107 0064 0000000C	        syscall
 108 0068 00404821	        move    $t1, $v0
 109 006c               
 110 006c                       # get col coordinate # 
 111 006c               
 112 006c 34020005	        li      $v0, READ_INT
 113 0070 0000000C	        syscall
 114 0074 00405021	        move    $t2, $v0
 115 0078               
 116 0078                       # place into array #                        # 2 values placed in
 117 0078               
 118 0078 AE490000	        sw      $t1, 0($s2)                         # 0($s2) = x value
 119 007c AE4A0004	        sw      $t2, 4($s2)                         # 4($s2) = y value
 120 0080 22520008	        addi    $s2, $s2, 8                         # increment pointer
 121 0084               
 122 0084                       # increment loop counter #
 123 0084               
 124 0084 22310001	        addi    $s1, $s1, 1
 125 0088 08000016	        j       loc_loop_A
 126 008c               
 127 008c               A_cells_end:
 128 008c               
 129 008c 8FBF0014	        lw      $ra, -4+CELL_FRAMESIZE($sp)
 130 0090 8FB00010	        lw      $s0, -8+CELL_FRAMESIZE($sp)       
 131 0094 8FB1000C	        lw      $s1, -12+CELL_FRAMESIZE($sp)                       
 132 0098 8FB20008	        lw      $s2, -16+CELL_FRAMESIZE($sp)                       
 133 009c 8FB30004	        lw      $s3, -20+CELL_FRAMESIZE($sp)
 134 00a0 23BD0018	        addi    $sp, $sp, CELL_FRAMESIZE
 135 00a4                       
 136 00a4 03E00008	        jr      $ra
 137 00a8                       
 138 00a8               # ===================================================================
 139 00a8               # Name:             get_B_cells:
 140 00a8               # ===================================================================
 141 00a8               # Description:      This function loads the user input for the
 142 00a8               #                   locations of the live cells for colony B
 143 00a8               #                   
 144 00a8               # Parameters:                         
 145 00a8               #       a0 -        the parameter block
 146 00a8               # S Registers:
 147 00a8               #       s0 -        the loop max (2xcells to place)
 148 00a8               #       s1 -        the loop counter
 149 00a8               #       s2 -        the location of the x buffer
 150 00a8               #       s3 -        the location of the y buffer
 151 00a8               #
 152 00a8               # T Registers:
 153 00a8               #       t0 -        end loop register
 154 00a8               #
 155 00a8               # ===================================================================
 156 00a8               
 157 00a8               get_B_cells:
 158 00a8 23BDFFE8	        addi    $sp, $sp, -CELL_FRAMESIZE
 159 00ac AFBF0014	        sw      $ra, -4+CELL_FRAMESIZE($sp)
 160 00b0 AFB00010	        sw      $s0, -8+CELL_FRAMESIZE($sp)       
 161 00b4 AFB1000C	        sw      $s1, -12+CELL_FRAMESIZE($sp)                       
 162 00b8 AFB20008	        sw      $s2, -16+CELL_FRAMESIZE($sp)                       
 163 00bc AFB30004	        sw      $s3, -20+CELL_FRAMESIZE($sp)
 164 00c0                       
 165 00c0 8C90000C	        lw      $s0, B_CELLS($a0)                   #load addr of cell cnt
 166 00c4 8E100000	        lw      $s0, 0($s0)                         #load int inside addr 
 167 00c8                   
 168 00c8 8C920014	        lw      $s2, NEXT_B($a0)                    #load addr of loc buf
 169 00cc 8E520000	        lw      $s2, 0($s2)                         #load addr of next el.
 170 00d0                       
 171 00d0 00008821	        move    $s1, $zero                          #i = 0
 172 00d4               
 173 00d4               
 174 00d4               loc_loop_B:
 175 00d4 0230402A	        slt     $t0, $s1, $s0
 176 00d8 1100000B	        beq     $t0, $zero, B_cells_end
 177 00dc                       
 178 00dc                       # get row coordinate # 
 179 00dc               
 180 00dc 34020005	        li      $v0, READ_INT
 181 00e0 0000000C	        syscall
 182 00e4 00404821	        move    $t1, $v0
 183 00e8               
 184 00e8                       # get col coordinate # 
 185 00e8               
 186 00e8 34020005	        li      $v0, READ_INT
 187 00ec 0000000C	        syscall
 188 00f0 00405021	        move    $t2, $v0
 189 00f4               
 190 00f4                       # place into array #                        # 2 values placed in
 191 00f4               
 192 00f4 AE490000	        sw      $t1, 0($s2)                         # 0($s2) = x value
 193 00f8 AE4A0004	        sw      $t2, 4($s2)                         # 4($s2) = y value
 194 00fc 22520008	        addi    $s2, $s2, 8                         # increment pointer
 195 0100               
 196 0100                       # increment loop counter #
 197 0100 22310001	        addi    $s1, $s1, 1
 198 0104 08000035	        j       loc_loop_B
 199 0108               
 200 0108               B_cells_end:
 201 0108               
 202 0108 8FBF0014	        lw      $ra, -4+CELL_FRAMESIZE($sp)
 203 010c 8FB00010	        lw      $s0, -8+CELL_FRAMESIZE($sp)       
 204 0110 8FB1000C	        lw      $s1, -12+CELL_FRAMESIZE($sp)                       
 205 0114 8FB20008	        lw      $s2, -16+CELL_FRAMESIZE($sp)                       
 206 0118 8FB30004	        lw      $s3, -20+CELL_FRAMESIZE($sp)
 207 011c 23BD0018	        addi    $sp, $sp, CELL_FRAMESIZE
 208 0120 03E00008	        jr      $ra
 209 0124               


A_ARR           = 00000018   
A_CELLS         = 00000008   
A_cells_end       0000008C R  text 
BOARD_DIM       = 00000000   
B_ARR           = 0000001C   
B_CELLS         = 0000000C   
B_cells_end       00000108 R  text 
CELL_FRAMESIZE  = 00000018   
GENS            = 00000004   
NEXT_A          = 00000010   
NEXT_B          = 00000014   
PRINT_INT       = 00000001   
PRINT_STRING    = 00000004   
READ_INT        = 00000005   
READ_STRING     = 00000008   
get_A_cells       0000002C RG text 
get_B_cells       000000A8 RG text 
get_integer       00000000 RG text 
loc_loop_A        00000058 R  text 
loc_loop_B        000000D4 R  text 
