   1 0000               #----------------------------------------------------------
   2 0000               # File: $Id$
   3 0000               # Author: Ryan Cervantes (rxc3202@rit.edu)
   4 0000               # Description:
   5 0000               #               This file contains the subroutines that gets the input from the
   6 0000               #               user in order to run the program
   7 0000               #----------------------------------------------------------
   8 0000               
   9 0000               # ===================
  10 0000               # || syscall codes ||
  11 0000               # ===================
  12 0000               
  13 0000               PRINT_INT =	1
  14 0000               PRINT_STRING = 	4
  15 0000               READ_INT = 	5
  16 0000               READ_STRING =	8
  17 0000               
  18 0000               # ===================
  19 0000               
  20 0000               # ==========================
  21 0000               # || param block constants||
  22 0000               # ==========================
  23 0000               
  24 0000               CELL_FRAMESIZE = 24
  25 0000               BOARD_DIM = 0
  26 0000               GENS = 4
  27 0000               A_CELLS = 8
  28 0000               B_CELLS = 12
  29 0000               NEXT_A = 16
  30 0000               NEXT_B  = 20
  31 0000               A_ARR = 24
  32 0000               B_ARR = 28
  33 0000               
  34 0000                       .text
  35 0000                       .align      2
  36 0000                       .globl      get_integer
  37 0000                       .globl      get_A_cells
  38 0000                       .globl      get_B_cells
  39 0000               
  40 0000               # ===================================================================
  41 0000               # Name:             get_integer
  42 0000               # ===================================================================
  43 0000               # Description:      This function loads the user input for
  44 0000               #                   the single integer parameters
  45 0000               # Parameters:                         
  46 0000               #       a0 -        the location where the input will be stored
  47 0000               #       a1 -        the lower bound
  48 0000               #       a2 -        the upper bound
  49 0000               #       a3 -        the location of the error message
  50 0000               # ===================================================================
  51 0000               
  52 0000               get_integer:
  53 0000 23BDFFF8	        addi    $sp, $sp, -8                       
  54 0004 AFBF0004	        sw      $ra, 4($sp)
  55 0008 AFB00000	        sw      $s0, 0($sp)                         #store s register
  56 000c               
  57 000c 34020005	        li      $v0, READ_INT                       #read int
  58 0010 0000000C	        syscall        
  59 0014                       
  60 0014 0045402A	        slt     $t0, $v0, $a1                       #if(input < lower)
  61 0018 00C2482A	        slt     $t1, $a2, $v0                       #if(input > upper
  62 001c 01095025	        or      $t2, $t0, $t1                      
  63 0020 11400006	        beq     $t2, $zero,integer_store
  64 0024                       
  65 0024 00808021	        move    $s0, $a0                            #save int addr
  66 0028 00E02021	        move    $a0, $a3                            
  67 002c 34020004	        li      $v0, PRINT_STRING
  68 0030 0000000C	        syscall                                     #print error
  69 0034 02002021	        move    $a0, $s0                            #restore int addr
  70 0038 08000000	        j       get_integer
  71 003c                       
  72 003c               
  73 003c               
  74 003c               integer_store:
  75 003c AC820000	        sw      $v0, 0($a0)                         #store in variable
  76 0040               
  77 0040 8FBF0004	        lw      $ra, 4($sp)
  78 0044 8FB00000	        lw      $s0, 0($sp)                         #restore s register 
  79 0048 23BD0008	        addi    $sp, $sp, 8
  80 004c 03E00008	        jr      $ra
  81 0050               
  82 0050               # ===================================================================
  83 0050               # Name:             get_A_cells:
  84 0050               # ===================================================================
  85 0050               # Description:      This function loads the user input for the
  86 0050               #                   locations of the live cells for colony A
  87 0050               #                   
  88 0050               # Parameters:                         
  89 0050               #       a0 -        addr the parameter block
  90 0050               #       a1 -        the location of the illegal string
  91 0050               #       a2 -        addr of the copy array
  92 0050               # S Registers:
  93 0050               #       s0 -        the loop max (2xcells to place)
  94 0050               #       s1 -        the loop counter
  95 0050               #       s2 -        the location of the coord buffer
  96 0050               #       s3 -        the location of the copy buffer
  97 0050               #
  98 0050               # T Registers:
  99 0050               #       t0 -        end loop register
 100 0050               #       t1 -        temp for row coordinate
 101 0050               #       t2 -        temp for col coordinate
 102 0050               #
 103 0050               # ===================================================================
 104 0050               
 105 0050               get_A_cells:
 106 0050 23BDFFE8	        addi    $sp, $sp, -CELL_FRAMESIZE
 107 0054 AFBF0014	        sw      $ra, -4+CELL_FRAMESIZE($sp)
 108 0058 AFB00010	        sw      $s0, -8+CELL_FRAMESIZE($sp)       
 109 005c AFB1000C	        sw      $s1, -12+CELL_FRAMESIZE($sp)                       
 110 0060 AFB20008	        sw      $s2, -16+CELL_FRAMESIZE($sp)                       
 111 0064 AFB30004	        sw      $s3, -20+CELL_FRAMESIZE($sp)
 112 0068               
 113 0068 8C8B0000	        lw      $t3, BOARD_DIM($a0)                 
 114 006c 8D6B0000	        lw      $t3, 0($t3)
 115 0070                       
 116 0070 8C900008	        lw      $s0, A_CELLS($a0)                   #load addr of cell cnt
 117 0074 8E100000	        lw      $s0, 0($s0)                         #load int inside addr 
 118 0078                   
 119 0078 8C920010	        lw      $s2, NEXT_A($a0)                    #load addr of loc buf
 120 007c 8E520000	        lw      $s2, 0($s2)                         #load addr of next el.
 121 0080                       
 122 0080 00C09821	        move    $s3, $a2
 123 0084 00008821	        move    $s1, $zero                          #i = 0
 124 0088                       
 125 0088               loc_loop_A:
 126 0088 0230402A	        slt     $t0, $s1, $s0                       #if(i < max)
 127 008c 1100001B	        beq     $t0, $zero, A_cells_end             #goto end
 128 0090                       
 129 0090                       # get row coordinate # 
 130 0090               
 131 0090 34020005	        li      $v0, READ_INT
 132 0094 0000000C	        syscall
 133 0098 00404821	        move    $t1, $v0
 134 009c               
 135 009c                       # get col coordinate # 
 136 009c               
 137 009c 34020005	        li      $v0, READ_INT
 138 00a0 0000000C	        syscall
 139 00a4 00405021	        move    $t2, $v0
 140 00a8               
 141 00a8                       # check valid x #
 142 00a8 0120C82A	        slt     $t9, $t1, $zero                     #if(in < 0) set t9
 143 00ac 1720000E	        bne     $t9, $zero, get_A_error
 144 00b0 012BC02A	        slt     $t8, $t1, $t3                       #if(in >= dim set t8
 145 00b4 1300000C	        beq     $t8, $zero, get_A_error
 146 00b8               
 147 00b8                       # check valid y #
 148 00b8 0140C82A	        slt     $t9, $t2, $zero                     #if(in < 0) set t9
 149 00bc 1720000A	        bne     $t9, $zero, get_A_error
 150 00c0 014BC02A	        slt     $t8, $t2, $t3                       #if(in >= dim set t8
 151 00c4 13000008	        beq     $t8, $zero, get_A_error
 152 00c8               
 153 00c8                       # place into array #                        # 2 values placed in
 154 00c8               
 155 00c8 AE490000	        sw      $t1, 0($s2)                         # 0($s2) = x value
 156 00cc AE4A0004	        sw      $t2, 4($s2)                         # 4($s2) = y value
 157 00d0 22520008	        addi    $s2, $s2, 8                         # increment pointer
 158 00d4               
 159 00d4 AE690000	        sw      $t1, 0($s3)                         # 0($s2) = x value
 160 00d8 AE6A0004	        sw      $t2, 4($s3)                         # 4($s2) = y value
 161 00dc 22730008	        addi    $s3, $s3, 8                         # increment pointer
 162 00e0               
 163 00e0                       # increment loop counter #
 164 00e0               
 165 00e0 22310001	        addi    $s1, $s1, 1
 166 00e4 08000022	        j       loc_loop_A
 167 00e8               
 168 00e8               get_A_error:
 169 00e8 00A02021	        move    $a0, $a1
 170 00ec 34020004	        li      $v0, PRINT_STRING
 171 00f0 0000000C	        syscall
 172 00f4 3402000A	        li      $v0, 10
 173 00f8 0000000C	        syscall
 174 00fc               
 175 00fc               A_cells_end:
 176 00fc               
 177 00fc 8FBF0014	        lw      $ra, -4+CELL_FRAMESIZE($sp)
 178 0100 8FB00010	        lw      $s0, -8+CELL_FRAMESIZE($sp)       
 179 0104 8FB1000C	        lw      $s1, -12+CELL_FRAMESIZE($sp)                       
 180 0108 8FB20008	        lw      $s2, -16+CELL_FRAMESIZE($sp)                       
 181 010c 8FB30004	        lw      $s3, -20+CELL_FRAMESIZE($sp)
 182 0110 23BD0018	        addi    $sp, $sp, CELL_FRAMESIZE
 183 0114                       
 184 0114 03E00008	        jr      $ra
 185 0118                       
 186 0118               # ===================================================================
 187 0118               # Name:             get_B_cells:
 188 0118               # ===================================================================
 189 0118               # Description:      This function loads the user input for the
 190 0118               #                   locations of the live cells for colony B
 191 0118               #                   
 192 0118               # Parameters:                         
 193 0118               #       a0 -        the parameter block
 194 0118               #       a1 -        the addr of error string
 195 0118               #       a2 -        the addr of the copy buffer
 196 0118               # S Registers:
 197 0118               #       s0 -        the loop max (2xcells to place)
 198 0118               #       s1 -        the loop counter
 199 0118               #       s2 -        the location of the location buffer
 200 0118               #       s3 -        the location of the copy location buffer
 201 0118               #
 202 0118               # T Registers:
 203 0118               #       t0 -        end loop register
 204 0118               #
 205 0118               # ===================================================================
 206 0118               
 207 0118               get_B_cells:
 208 0118 23BDFFE8	        addi    $sp, $sp, -CELL_FRAMESIZE
 209 011c AFBF0014	        sw      $ra, -4+CELL_FRAMESIZE($sp)
 210 0120 AFB00010	        sw      $s0, -8+CELL_FRAMESIZE($sp)       
 211 0124 AFB1000C	        sw      $s1, -12+CELL_FRAMESIZE($sp)                       
 212 0128 AFB20008	        sw      $s2, -16+CELL_FRAMESIZE($sp)                       
 213 012c AFB30004	        sw      $s3, -20+CELL_FRAMESIZE($sp)
 214 0130               
 215 0130 8C8B0000	        lw      $t3, BOARD_DIM($a0)                 #get dim to compare
 216 0134 8D6B0000	        lw      $t3, 0($t3)
 217 0138                       
 218 0138 8C90000C	        lw      $s0, B_CELLS($a0)                   #load addr of cell cnt
 219 013c 8E100000	        lw      $s0, 0($s0)                         #load int inside addr 
 220 0140                   
 221 0140 8C920014	        lw      $s2, NEXT_B($a0)                    #load addr of loc buf
 222 0144 8E520000	        lw      $s2, 0($s2)                         #load addr of next el.
 223 0148                       
 224 0148 00008821	        move    $s1, $zero                          #i = 0
 225 014c 00C09821	        move    $s3, $a2
 226 0150               
 227 0150               
 228 0150               loc_loop_B:
 229 0150 0230402A	        slt     $t0, $s1, $s0
 230 0154 1100001B	        beq     $t0, $zero, B_cells_end
 231 0158                       
 232 0158                       # get row coordinate # 
 233 0158               
 234 0158 34020005	        li      $v0, READ_INT
 235 015c 0000000C	        syscall
 236 0160 00404821	        move    $t1, $v0
 237 0164               
 238 0164                       # get col coordinate # 
 239 0164               
 240 0164 34020005	        li      $v0, READ_INT
 241 0168 0000000C	        syscall
 242 016c 00405021	        move    $t2, $v0
 243 0170               
 244 0170                       # check valid y #
 245 0170 0120C82A	        slt     $t9, $t1, $zero                     #if(in < 0) set t9
 246 0174 1720000E	        bne     $t9, $zero, get_B_error
 247 0178 012BC02A	        slt     $t8, $t1, $t3                       #if(in > dim set t8
 248 017c 1300000C	        beq     $t8, $zero, get_B_error
 249 0180               
 250 0180                       # check valid x #
 251 0180 0140C82A	        slt     $t9, $t2, $zero                     #if(in < 0) set t9
 252 0184 1720000A	        bne     $t9, $zero, get_B_error
 253 0188 014BC02A	        slt     $t8, $t2, $t3                       #if(in > dim set t8
 254 018c 13000008	        beq     $t8, $zero, get_B_error
 255 0190               
 256 0190                       # place into array #                        # 2 values placed in
 257 0190               
 258 0190 AE490000	        sw      $t1, 0($s2)                         # 0($s2) = x value
 259 0194 AE4A0004	        sw      $t2, 4($s2)                         # 4($s2) = y value
 260 0198 22520008	        addi    $s2, $s2, 8                         # increment pointer
 261 019c               
 262 019c AE690000	        sw      $t1, 0($s3)                         # 0($s3) = x value
 263 01a0 AE6A0004	        sw      $t2, 4($s3)                         # 4($s3) = y value
 264 01a4 22730008	        addi    $s3, $s3, 8                         # increment pointer
 265 01a8               
 266 01a8                       # increment loop counter #
 267 01a8 22310001	        addi    $s1, $s1, 1
 268 01ac 08000054	        j       loc_loop_B
 269 01b0               
 270 01b0               get_B_error:
 271 01b0 00A02021	        move    $a0, $a1
 272 01b4 34020004	        li      $v0, PRINT_STRING
 273 01b8 0000000C	        syscall
 274 01bc 3402000A	        li      $v0, 10
 275 01c0 0000000C	        syscall
 276 01c4               
 277 01c4               B_cells_end:
 278 01c4               
 279 01c4 8FBF0014	        lw      $ra, -4+CELL_FRAMESIZE($sp)
 280 01c8 8FB00010	        lw      $s0, -8+CELL_FRAMESIZE($sp)       
 281 01cc 8FB1000C	        lw      $s1, -12+CELL_FRAMESIZE($sp)                       
 282 01d0 8FB20008	        lw      $s2, -16+CELL_FRAMESIZE($sp)                       
 283 01d4 8FB30004	        lw      $s3, -20+CELL_FRAMESIZE($sp)
 284 01d8 23BD0018	        addi    $sp, $sp, CELL_FRAMESIZE
 285 01dc 03E00008	        jr      $ra
 286 01e0               


A_ARR           = 00000018   
A_CELLS         = 00000008   
A_cells_end       000000FC R  text 
BOARD_DIM       = 00000000   
B_ARR           = 0000001C   
B_CELLS         = 0000000C   
B_cells_end       000001C4 R  text 
CELL_FRAMESIZE  = 00000018   
GENS            = 00000004   
NEXT_A          = 00000010   
NEXT_B          = 00000014   
PRINT_INT       = 00000001   
PRINT_STRING    = 00000004   
READ_INT        = 00000005   
READ_STRING     = 00000008   
get_A_cells       00000050 RG text 
get_A_error       000000E8 R  text 
get_B_cells       00000118 RG text 
get_B_error       000001B0 R  text 
get_integer       00000000 RG text 
integer_store     0000003C R  text 
loc_loop_A        00000088 R  text 
loc_loop_B        00000150 R  text 
